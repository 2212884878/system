webpackJsonp([4],{ALGf:function(e,t){},G33z:function(e,t){},"ncO/":function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var l=a("Dd8w"),n=a.n(l),o=a("NYxO"),r={data:function(){return{loading:!1,list:[],currentPage:1,count:0,PageSize:10,PageSizes:[10,20,30,40,50,100],currentPage2:1,count2:0,PageSize2:10,productName:"",typeId:"",classId:"",productNames:"",StringProductId:"",valueDate:"",sData:"",eData:"",multipleSelection:[],dialogVisible:!1,data:[]}},computed:n()({},Object(o.b)(["userId","accussToken","typeID","classID"])),created:function(){document.title="维护库存信息"},mounted:function(){this.createPriceCalendar()},methods:{valueDates:function(e){e?(this.sData=this.valueDate[0],this.eData=this.valueDate[1]):(this.sData="",this.eData="")},IsTrue:function(e,t,a,l){var n=a?1:0;return e.holidaySign=n,a?"是":"否"},editBill:function(){var e=this,t=this.multipleSelection;this.$axios.put("http://192.168.2.42:6030/stock/updateBatchPrice",t).then(function(a){200==a.data.code?(e.$message({message:"更新了"+t.length+" 条数据",type:"success"}),e.createPriceCalendar()):e.$message.error(a.data.message)}).catch(function(e){console.log(e)})},createPriceCalendar:function(){var e=this;console.log(this.valueDate);var t={pageNum:this.currentPage2,pageSize:this.PageSize2,productId:this.productNames,beginDate:this.sData,endDate:this.eData};this.$axios.get("http://192.168.2.42:6030/stock/createPriceCalendar",{params:t}).then(function(t){200==t.data.code?(e.data=t.data.data.list||[],console.log(e.data),e.count2=t.data.data.total||0):e.$message.error(t.data.message)}).catch(function(t){e.data=[],e.count2=0,console.log(t)})},handleSelectionChange:function(e){console.log(e),this.multipleSelection=e},search:function(){console.log(this.currentPage,this.PageSize,this.productName,this.typeId,this.classId),this.SetList(this.currentPage,this.PageSize,this.productName,this.typeId,this.classId)},formatTypeId:function(e,t){var a="";return this.typeID.forEach(function(t){t.id==e.typeId&&(a=t.name)}),a=""==a?e.typeId:a},formatClassId:function(e,t){var a="";return this.classID.forEach(function(t){t.id==e.classId&&(a=t.name)}),a=""==a?e.classId:a},handleSizeChange:function(e){this.PageSize=e,this.SetList(this.currentPage,this.PageSize),console.log("每页 "+e+" 条")},handleCurrentChange:function(e){this.currentPage=e,this.SetList(this.currentPage,this.PageSize),console.log("当前页: "+e)},handleSizeChange2:function(e){this.PageSize2=e,this.createPriceCalendar(),console.log("每页 "+e+" 条")},handleCurrentChange2:function(e){this.currentPage2=e,this.createPriceCalendar(),console.log("当前页: "+e)},SetList:function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",l=this,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"",o={pageNum:e,pageSize:t,classId:arguments.length>4&&void 0!==arguments[4]?arguments[4]:"",typeId:n,productName:a};this.$axios.get("http://192.168.2.38:5010/product/findProduct",{params:o}).then(function(e){200==e.data.code?(l.list=e.data.data.list||[],console.log(l.list),l.count=e.data.data.total||0):l.$message.error(e.data.message)}).catch(function(e){l.list=[],l.count=0,console.log(e)})},tableRowClassName:function(e){var t=e.row,a=e.rowIndex;t.index=a},tableHeaderColor:function(e){e.row,e.column;var t=e.rowIndex;e.columnIndex;if(0===t)return"background-color: #f5f7fa;color: #909399;font-weight: 700;"},openDetails:function(e,t,a){console.log(e.productName),this.StringProductId=e.productName},SetRuleForm:function(){""!=this.StringProductId?(this.productNames=this.StringProductId,this.dialogVisible=!1):this.$message({message:"请选中一条数据",type:"warning"})}},watch:{dialogVisible:function(e){e||(this.StringProductId="")}}},i={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("section",{staticClass:"newPr"},[a("el-row",{staticClass:"borderm2"},[a("el-col",{attrs:{span:20}},[a("h4",[e._v(e._s(e.$route.meta.title))])]),e._v(" "),a("el-col",{staticClass:"text-alginr",attrs:{span:4}},[a("el-button",{attrs:{type:"primary",icon:"el-icon-edit",size:"mini"}},[e._v("我要留言")])],1)],1),e._v(" "),a("el-row",{staticClass:"mb10",attrs:{gutter:20}},[a("el-col",{attrs:{span:6}},[a("el-input",{attrs:{placeholder:"请输入产品名称",size:"mini"},model:{value:e.productNames,callback:function(t){e.productNames=t},expression:"productNames"}},[a("el-button",{attrs:{slot:"append",icon:"el-icon-download"},on:{click:function(t){e.dialogVisible=!0,e.SetList(e.currentPage,e.PageSize)}},slot:"append"})],1)],1),e._v(" "),a("el-col",{attrs:{span:18}},[a("el-date-picker",{attrs:{type:"daterange",size:"mini","range-separator":"至","start-placeholder":"开始日期","end-placeholder":"结束日期",format:"yyyy-MM-dd","value-format":"yyyy-MM-dd"},on:{change:e.valueDates},model:{value:e.valueDate,callback:function(t){e.valueDate=t},expression:"valueDate"}})],1)],1),e._v(" "),a("el-row",[a("el-col",{staticClass:"mb10",attrs:{span:24}},[a("el-button",{attrs:{type:"primary",icon:"el-icon-refresh",size:"mini",round:""},on:{click:e.createPriceCalendar}},[e._v("刷新表格")]),e._v(" "),a("el-button",{attrs:{type:"primary",icon:"el-icon-upload2",size:"mini",round:""},on:{click:e.createPriceCalendar}},[e._v("生成")]),e._v(" "),a("el-button",{attrs:{type:"primary",icon:"el-icon-check",size:"mini",round:""},on:{click:e.editBill}},[e._v("提交")])],1),e._v(" "),a("el-col",{staticClass:"tabs",attrs:{span:24}},[a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],ref:"multipleTable",staticStyle:{width:"100%"},attrs:{data:e.data,border:"","highlight-current-row":"",height:"500","header-cell-style":e.tableHeaderColor,"element-loading-text":"拼命加载数据中","element-loading-spinner":"el-icon-loading",size:"mini"},on:{"selection-change":e.handleSelectionChange}},[a("el-table-column",{attrs:{fixed:"",prop:"id",label:"ID",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{type:"selection",fixed:"",width:"55",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{prop:"dataBaseDate","min-width":"100",label:"库存日期",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{prop:"holidaySign",label:"节假日",align:"center",formatter:e.IsTrue}}),e._v(" "),a("el-table-column",{attrs:{prop:"weekIndex",label:"星期数",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{prop:"holidayType","min-width":"100",label:"节假日类型",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{prop:"dataBaseTotalCount","min-width":"100",label:"当天总库存数",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{prop:"alreadyUseCount","min-width":"100",label:"已售出库存数",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{prop:"occupationCount","min-width":"100",label:"已占用库存数",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{prop:"originalPrice",label:"原价",align:"center","min-width":"100"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-input",{attrs:{size:"mini"},model:{value:t.row.originalPrice,callback:function(a){e.$set(t.row,"originalPrice",e._n(a))},expression:"scope.row.originalPrice"}})]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"returnPrice",label:"退票价格",align:"center","min-width":"100"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-input",{attrs:{size:"mini"},model:{value:t.row.returnPrice,callback:function(a){e.$set(t.row,"returnPrice",e._n(a))},expression:"scope.row.returnPrice"}})]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"settlementPrice",label:"结算价格",align:"center","min-width":"100"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-input",{attrs:{size:"mini"},model:{value:t.row.settlementPrice,callback:function(a){e.$set(t.row,"settlementPrice",e._n(a))},expression:"scope.row.settlementPrice"}})]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"salePrice",label:"销售价格",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{prop:"enableSign",label:"是否启动卖票",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-checkbox-group",{model:{value:t.row.enableSign,callback:function(a){e.$set(t.row,"enableSign",a)},expression:"scope.row.enableSign"}},[a("el-checkbox",{attrs:{label:"是",name:"saleType","true-label":1,"false-label":0}})],1)]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"createDate",label:"创建日期",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{prop:"bs",label:"PC网页",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-checkbox-group",{model:{value:t.row.bs,callback:function(a){e.$set(t.row,"bs",a)},expression:"scope.row.bs"}},[a("el-checkbox",{attrs:{label:"是",name:"saleType","true-label":1,"false-label":0}})],1)]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"app",label:"APP",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-checkbox-group",{model:{value:t.row.app,callback:function(a){e.$set(t.row,"app",a)},expression:"scope.row.app"}},[a("el-checkbox",{attrs:{label:"是",name:"saleType","true-label":1,"false-label":0}})],1)]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"weiXin","min-width":"100",label:"微信公众号",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-checkbox-group",{model:{value:t.row.weiXin,callback:function(a){e.$set(t.row,"weiXin",a)},expression:"scope.row.weiXin"}},[a("el-checkbox",{attrs:{label:"是",name:"saleType","true-label":1,"false-label":0}})],1)]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"samllProgress","min-width":"100",label:"微信小程序",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-checkbox-group",{model:{value:t.row.samllProgress,callback:function(a){e.$set(t.row,"samllProgress",a)},expression:"scope.row.samllProgress"}},[a("el-checkbox",{attrs:{label:"是",name:"saleType","true-label":1,"false-label":0}})],1)]}}])})],1),e._v(" "),a("section",{staticClass:"pages"},[a("el-pagination",{attrs:{"current-page":e.currentPage2,"page-sizes":e.PageSizes,"page-size":e.PageSize2,layout:"total, sizes, prev, pager, next, jumper",total:e.count2},on:{"size-change":e.handleSizeChange2,"current-change":e.handleCurrentChange2}})],1)],1)],1),e._v(" "),a("el-dialog",{attrs:{title:"产品信息列表",visible:e.dialogVisible,width:"80%",center:""},on:{"update:visible":function(t){e.dialogVisible=t}}},[a("div",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticClass:"tabs click"},[a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.list,border:"","highlight-current-row":"",size:"medium","row-class-name":e.tableRowClassName,height:"500"},on:{"row-click":e.openDetails}},[a("el-table-column",{attrs:{prop:"id",label:"ID",width:"400",align:"center"}},[a("el-table-column",{attrs:{prop:"id",align:"center",width:"400"}})],1),e._v(" "),a("el-table-column",{attrs:{width:"300",prop:"productName",label:"产品名称",align:"center"}},[a("el-table-column",{attrs:{width:"300",prop:"productName",align:"center"},scopedSlots:e._u([{key:"header",fn:function(t){return[a("el-input",{attrs:{size:"small",placeholder:"输入关键字搜索"},on:{change:e.search},nativeOn:{keyup:function(t){return"button"in t||!e._k(t.keyCode,"enter",13,t.key,"Enter")?e.search(t):null}},model:{value:e.productName,callback:function(t){e.productName=t},expression:"productName"}})]}}])})],1),e._v(" "),a("el-table-column",{attrs:{prop:"typeId",label:"产品分类",align:"center"}},[a("el-table-column",{attrs:{prop:"typeId",align:"center",formatter:e.formatTypeId},scopedSlots:e._u([{key:"header",fn:function(t){return[a("el-select",{attrs:{size:"small",placeholder:"请选择"},on:{change:e.search},model:{value:e.typeId,callback:function(t){e.typeId=t},expression:"typeId"}},[a("el-option",{attrs:{value:"",label:"全部"}}),e._v(" "),e._l(e.typeID,function(e){return a("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})})],2)]}}])})],1),e._v(" "),a("el-table-column",{attrs:{prop:"classId",label:"产品类型",align:"center"}},[a("el-table-column",{attrs:{prop:"classId",align:"center",formatter:e.formatClassId},scopedSlots:e._u([{key:"header",fn:function(t){return[a("el-select",{attrs:{size:"small",placeholder:"请选择"},on:{change:e.search},model:{value:e.classId,callback:function(t){e.classId=t},expression:"classId"}},[a("el-option",{attrs:{value:"",label:"全部"}}),e._v(" "),e._l(e.classID,function(e){return a("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})})],2)]}}])})],1)],1),e._v(" "),a("section",{staticClass:"pages"},[a("el-pagination",{attrs:{"current-page":e.currentPage,"page-sizes":e.PageSizes,"page-size":e.PageSize,layout:"total, sizes, prev, pager, next, jumper",total:e.count},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1)],1),e._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.dialogVisible=!1}}},[e._v("取 消")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:e.SetRuleForm}},[e._v("确 定")])],1)])],1)},staticRenderFns:[]};var s=a("VU/8")(r,i,!1,function(e){a("G33z"),a("pmWy"),a("ALGf")},"data-v-5face8af",null);t.default=s.exports},pmWy:function(e,t){}});